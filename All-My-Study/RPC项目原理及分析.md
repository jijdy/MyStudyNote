####  基本概念

* rpc，即Remote Procedure Call 远程过程调用，即在远端调用另一个远端服务器中的服务并完成相关计算并返回结果
* 本地过程调用：在本地若需要在同一个进程中的实现不同服务之间的调用，直接通过参数传递即可完成，若需要对一个对象中的数据进行操作，则可以实现一个方法对对象中的数据进行操作，在操作完成之后直接在本地进行返回即可，也即一般我们使用本地编程的方式
* 远程过程调用： 若需要进行数据存储和进行计算的两个服务不在同一个服务器，即对象在和需要执行的函数在不同的远端机器，可将需要进行远程调用的服务看做**消费方**，进行远程计算工作的服务方看做**生产方**，将则需要
  1. 首先消费方需要告诉生产方，需要需要调用的函数，这里一般函数和进程ID存在一个映射，需要在消费方远端和生产方都使用一个map来维护一个key-value结构的函数名-进程id表；也可以使用接口对多个方法进行整和方便调用
  2. 消费方需要将需要进行调用的函数名以及进行运算的参数远程发送到生产方，在这个过程中需要消费方在本地将函数id/函数名和参数进行打包并序列化为2进制进行传输，在生成方则需要进行反序列化将这些数据解析并完成服务工作。
  3. 在这些基本的调用中，如何进行数据的远程传输也是一个问题。一般使用TCP直接进行数据传输并对相关协议进行数据解析和加密。在常用的grpc中就使用了HTTP2协议进行数据的通信和传输。当然也可以直接借用应用层使用REST进行数据传输，但是其相较于TCP传输需要使用的资源较多。

* 注册中心的使用：一把若使用的服务远端过多时，会使用注册中心对需要调用的方法和其方法所在远端地址进行存储，以便一个消费方能够找到对应的生产方进行操作。注册中心的一般讲需要调用的方法和方法所在的地址保存为一个映射进行存储。
* (盗来的rpc实现图（笑）)

![图 12-1](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/12107a0c068e4debbb1387bf2566165b~tplv-k3u1fbpfcp-zoom-1.image)
